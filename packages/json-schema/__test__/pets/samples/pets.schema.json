{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "properties": {
    "pets": {
      "type": "array",
      "items": {
        "oneOf": [
          { "$ref": "#/definitions/cat" },
          { "$ref": "#/definitions/dog" },
          { "$ref": "#/definitions/mouse" },
          { "$ref": "#/definitions/duck" }
        ]
      }
    }
  },
  "definitions": {
    "pet": {
      "$id": "#pet",
      "properties": {
        "name": { "type": "string" },
        "age": { "type": "number", "maximum": 100, "minimum": 0 },
        "favorites": {
          "type": "array",
          "items": { "type": "string" }
        }
      },
      "required": ["name"]
    },
    "cat": {
      "$id": "#cat",
      "allOf": [
        { "$ref": "#/definitions/pet" },
        {
          "properties": {
            "type": { "const": "cat" },
            "meow": {
              "type": "string",
              "description": "The cat's social language"
            }
          },
          "required": ["type", "meow"]
        }
      ]
    },
    "dog": {
      "$id": "#dog",
      "allOf": [
        { "$ref": "#/definitions/pet" },
        {
          "properties": {
            "type": { "const": "dog" },
            "bark": {
              "type": "string",
              "description": "The dog's social language"
            }
          },
          "required": ["type", "bark"]
        }
      ]
    },
    "duck": {
      "$id": "#duck",
      "allOf": [
        { "$ref": "#/definitions/pet" },
        {
          "properties": {
            "type": { "const": "duck" },
            "quack": {
              "type": "string",
              "description": "The duck's social language"
            }
          },
          "required": ["type", "quack"]
        }
      ]
    },
    "mouse": {
      "$id": "#mouse",
      "allOf": [
        { "$ref": "#/definitions/pet" },
        {
          "properties": {
            "type": { "const": "mouse" },
            "squeak": {
              "type": "string",
              "description": "The mouse's social language"
            }
          },
          "required": ["type", "squeak"]
        }
      ]
    }
  },
  "required": ["pets"]
}
